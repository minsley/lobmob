---
status: draft
tags: [ui, infrastructure, lobboss]
maturity: design
created: 2026-02-15
updated: 2026-02-15
---
# Task Flow Improvements

## Summary

Improve the task creation and tracking experience with web-based task entry and better visibility into task lifecycle. The lobboss web dashboard (port 8080) is the natural home for a task management UI, starting with creation and expanding to list/edit/filter over time. Authentication and WAN access are out of scope — handled separately.

## Open Questions

- [x] Task creation form: should submitting also trigger lobboss to pick it up immediately (webhook/event), or rely on the existing poll cycle? **Resolved: shorten poll cycle for near-instant pickup. Direct trigger deferred to vault scaling work**
- [x] Task list: how much vault state to expose? **Resolved: active by default, completed/failed tabs limited to last 30 days or 50 entries**
- [x] Edit capability: which fields should be editable after creation? **Resolved: Phase 1-2 are read-only after creation. Phase 3 adds cancel/re-open actions; once in a cancellable/editable state, all fields except ID and system-managed fields (assignee, etc.) are editable**
- [x] Naming for non-task jobs: **Resolved: pool jobs = `lobster-pool-{type}-{n}`, reserve jobs = `lobster-reserve-{type}-{name|slug}`**

## Current State

### Task IDs
- Format: `YYYY-MM-DD-slug` (e.g. `2026-02-15-fix-login-bug`)
- Generated by lobboss when creating task files in the vault
- Used as the canonical identifier everywhere: vault filename, k8s job labels, Discord threads, PRs

### K8s Job Names
- Already use task ID: `lobster-{type}-{task-id}`, sanitized to 63 chars via `_sanitize_k8s_name()`
- Produces readable names like `lobster-swe-2026-02-15-unity-ui`
- Implemented in `src/lobboss/mcp_tools.py:129`

### Task Entry
- Primary: Discord message in #task-queue, lobboss creates the task
- Secondary: Manual vault file creation (used for system tasks, testing)
- No web UI for task entry

## Phases

### Phase 1: Web task creation form

- **Status**: pending
- Add a task creation page/tab to the lobboss web dashboard (`scripts/server/lobmob-web.js`, port 8080)
- Form fields: description (text area), type (swe/research/qa dropdown), priority (optional), target repos (optional, comma-separated), name (optional display name)
- Submit action: create the vault task file in `010-tasks/queued/` with appropriate frontmatter
- Shorten the task poll cycle so new tasks are picked up near-instantly (direct trigger deferred to vault scaling)
- Cluster-internal access only (port-forward). No authentication layer in this phase

### Phase 2: Task list view

- **Status**: pending
- Read-only task list on the lobboss web dashboard
- Show: task ID, display name, type, status, assigned lobster (job name), PR links, created/updated timestamps
- Source data from vault files (lobboss already has vault access)
- Default view: active tasks. Tabs for completed and failed, limited to last 30 days or 50 entries
- Link each task to its Discord thread and GitHub PRs

### Phase 3: Task actions and editing

- **Status**: pending
- Add cancel action: cancels a queued or in-progress task, cleans up associated state (kills running lobster job, closes draft PRs if any)
- Add re-open action: moves a cancelled or failed task back to queued
- Once cancelled or re-opened, all fields are editable except: task ID, and system-managed fields (assignee, assigned_at, completed_at, etc.)
- Edits write back to the vault task file (same git workflow as task creation)
- Audit trail: log who/what modified the task (web UI vs. Discord vs. system)

### Phase 4: Filtering, querying, bulk operations (stretch)

- **Status**: pending
- Search and filter by status, type, date range, assigned lobster, repo
- Bulk actions: cancel all queued, re-queue selected failed tasks
- Task statistics: completion rate, average duration by type, cost per task
- This phase may overlap with or be superseded by vault Dataview dashboards

## Decisions Log

| Date | Decision | Rationale |
|------|----------|-----------|
| 2026-02-15 | Keep date-based task IDs as-is | Natural sort order, no coordination needed for uniqueness, already well-integrated |
| 2026-02-15 | K8s job naming already uses task ID | `lobster-{type}-{task-id}` is already readable. No changes needed |
| 2026-02-15 | Skip task short-codes for now | Low task volume doesn't justify the counter coordination complexity |
| 2026-02-15 | Web UI lives on lobboss dashboard | lobboss is the task creator and coordinator — natural home |
| 2026-02-15 | Authentication out of scope | WAN access, login, and cluster ingress are a separate concern |
| 2026-02-15 | Shorten poll cycle instead of direct trigger | Simpler, avoids coupling web UI to lobboss internals. Revisit as part of vault scaling |
| 2026-02-15 | No editing in Phases 1-2, cancel/re-open in Phase 3 | Keep early phases simple. Editing only makes sense after cancel/re-open gives you a safe state to edit in |
| 2026-02-15 | Job naming: pool = `lobster-pool-{type}-{n}`, reserve = `lobster-reserve-{type}-{name}` | Visually distinct from task jobs, consistent prefix pattern for kubectl filtering |

## Scratch

- Could add a task search/filter to the web UI (by status, type, date range)
- Discord thread names could include a task display name instead of just the ID
- Consider a task URL scheme that deep-links to the web dashboard
- The lobboss web dashboard currently shows fleet status — task entry would be a natural second tab
- Job naming convention decided:
  - Task: `lobster-{type}-{task-id}` (current)
  - Pool: `lobster-pool-{type}-{n}` (e.g. `lobster-pool-swe-01`)
  - Reserve: `lobster-reserve-{type}-{name|slug}` (user-provided name or generated slug, e.g. `lobster-reserve-swe-debug-vault`)
- Reserve creation UI (web or CLI) should have a name field, default-populated with a generated slug from the description

## Related

- [Roadmap](../roadmap.md)
- [Scratch Sheet](../planning-scratch-sheet.md)
- [Discord UX](./discord-ux.md) — Task notifications and thread naming
